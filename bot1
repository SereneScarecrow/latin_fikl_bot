#pip install telebot
#pip install requests
#pip install https://huggingface.co/latincy/la_core_web_lg/resolve/main/la_core_web_lg-any-py3-none-any.whl

import telebot
import requests
from telebot import types
import spacy
nlp = spacy.load('la_core_web_lg')

bot = telebot.TeleBot('ТОКЕН')
bot.remove_webhook()


@bot.message_handler(commands=['start'])
def start_message(message):
    user_id = message.from_user.id
    pressStartButton = 'Кнопка старт'

    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    latinButton = types.KeyboardButton('ЛАТЫНЬ')
    markup.add(latinButton)

    bot.send_message(message.chat.id, "Напишите своё предложение на латыни!",
                     parse_mode='html', reply_markup=markup)


@bot.message_handler(content_types=['text'])
def lalala(message):
    if message.chat.type == 'private':
        if message.text == 'ЛАТЫНЬ':
            bot.send_message(message.chat.id, 'Можете написать слово, словосочетание или предложение на латыни, а мы постараемся его перевести.')
        else:
            user_id = message.from_user.id
            doc = nlp(message.text)

            razbor = ""
            for i in range(len(doc)):
              razbor += f'{doc[i].text}, {doc[i].norm_}, {doc[i].lemma_}, {doc[i].pos_}'
              razbor += '\n'

            bot.send_message(message.chat.id, razbor)


bot.polling(none_stop=True)
